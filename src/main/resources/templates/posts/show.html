<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Лента</title>
</head>
<body>
<div th:insert="~{common :: com}"></div>
<div class="container mt-5">
    <div class="post-container">
        <h1 class="display-4" th:text="${post.title}">Post Title</h1>

        <img th:src="@{${post.image}}" alt="Post Image" class="img-fluid mb-4">

        <div th:utext="${post.content}" class="post-content mb-4"></div>

        <div class="tags mb-4">
            <span th:each="tag : ${post.tags}" class="badge bg-primary me-2" th:text="${tag}"></span>
        </div>

        <!-- Кнопки удаления и редактирования -->
        <div class="post-actions mb-4">
            <a href="/editPost/{id}" class="btn btn-warning me-2">Edit Post</a>
            <form action="/deletePost/{id}" method="post" th:object="${post}" class="d-inline">
                <button type="submit" class="btn btn-danger">Delete Post</button>
            </form>
        </div>

        <!-- Лайки -->
        <div class="like-section mb-4">
            <form th:action="@{/{id}/like(id=${post.id})}" method="post">
                <!-- Скрытое поле, чтобы отправить PUT-запрос -->
                <input type="hidden" name="_method" value="PATCH" />
                <button type="submit" class="btn btn-outline-primary">
                    Like <span id="likeCount" th:text="${post.likeCounter}">0</span>
                </button>
            </form>
        </div>

        <!-- Кнопка добавления комментария -->
        <div class="add-comment-section mb-4">
            <form action="/addComment" method="post">
                <div class="mb-3">
                    <textarea name="commentText" class="form-control" placeholder="Add a comment" required></textarea>
                </div>
                <button type="submit" class="btn btn-success">Add Comment</button>
            </form>
        </div>

        <!-- Список комментариев -->
        <div class="comments-section">
            <div th:each="comment : ${post.comments}" class="comment mb-3 p-3 border rounded">
                <p th:text="${comment}"></p>

                <!-- Кнопки для редактирования и удаления комментариев -->
                <div class="comment-actions">
                    <a href="/editComment/{id}" class="btn btn-outline-warning btn-sm">Edit</a>
                    <form action="/deleteComment/{id}" method="post" class="d-inline">
                        <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>